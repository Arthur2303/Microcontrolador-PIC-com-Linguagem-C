/*Lendo uma tensão com Conversor AD 
NOTA: Os pinos do Modulo Conversor Analógico Digital(ADC) são utilizados por padrão como bits de entrada e saída(E/S).
No entanto, é possível escolher se cada pino será utilizado como E/S ou leitura analógica.*/
#include <18F4550.h>
#device adc=10 // Definição de quantos bits o conversor irá utilizar. OBS: 18F4550 pode 8 ou 10 bit
#fuses HS, NOMCLR, NOWDT
#use delay(clock=20MHz)

#include <lcd.c>

void main () {

   unsigned int16 valor;
   float tensao;
   
   lcd_init();
   
   setup_adc( ADC_CLOCK_INTERNAL );//Configuando o módulo com a origem do clock interno.
   setup_adc_ports( AN0 );//Específica a porta analógica que será utilizada.
   set_adc_channel(0);//Determinando o canal ativo.
   
   while(true) {
      valor = read_adc();//Lê-se a porta ativada pela função set_adc_channel
      tensao = valor / 1023.0 * 5.0;
      printf(LCD_PUTC, "\fValor: %lu\n", valor);
      printf(LCD_PUTC, "Tensao: %f", tensao);
      delay_ms(100);
   }
   
   
}





